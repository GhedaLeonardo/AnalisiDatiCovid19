(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function g(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(t){if(t.ep)return;t.ep=!0;const i=g(t);fetch(t.href,i)}})();var u=L.map("map").setView([41.87194,12.56738],6);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(u);fetch("https://raw.githubusercontent.com/openpolis/geojson-italy/master/geojson/limits_IT_regions.geojson").then(d=>d.json()).then(d=>{fetch("https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-json/dpc-covid19-ita-regioni-latest.json").then(n=>n.json().then(g=>{function a(e){return g.filter(o=>o.codice_regione==e)[0]}function t(e){var o=e.target;c.update(a(o.feature.properties.reg_istat_code_num)),o.setStyle({weight:3,color:"#1f78b4",dashArray:"",fillOpacity:.7}),o.bringToFront()}function i(e){c.update(),p.resetStyle(e.target)}function s(e,o){o.on({mouseover:t,mouseout:i,click:v})}function f(e){return e>5e3?"#800026":e>2e3?"#BD0026":e>1e3?"#E31A1C":e>500?"#FC4E2A":e>250?"#FD8D3C":e>100?"#FEB24C":e>50?"#FED976":"#FFEDA0"}function h(e){e.properties.reg_istat_code_num==4&&(e.properties.reg_istat_code_num=21);const o=a(e.properties.reg_istat_code_num);return{fillColor:f(o.nuovi_positivi),weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.7}}var p=L.geoJSON(d,{style:h,onEachFeature:s}).addTo(u),m=L.control({position:"bottomright"}),c=L.control();c.onAdd=function(e){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},c.update=function(e){this._div.innerHTML="<h4>Dati covid19</h4>"+(e?"<b>"+e.denominazione_regione+"</b><br />Nuovi positivi: "+e.nuovi_positivi+"<br />Totale positivi: "+e.totale_positivi+"<br />Totale deceduti: "+e.deceduti+"<br />Totale dimessi guariti: "+e.dimessi_guariti+"<br />Totale casi: "+e.totale_casi+"<br />Tamponi: "+e.tamponi+"<br />Ricoverati con sintomi: "+e.ricoverati_con_sintomi+"<br />Terapia intensiva: "+e.terapia_intensiva+"<br />Isolamento domiciliare: "+e.isolamento_domiciliare+"<br />Ingressi terapia intensiva: "+e.ingressi_terapia_intensiva+"<br />":"Muovi il cursore sopra una regione")},c.addTo(u),m.onAdd=function(e){var o=L.DomUtil.create("div","info legend"),l=[0,50,100,250,500,1e3,2e3,5e3];o.innerHTML+="<h4>Nuovi positivi</h4>";for(var r=0;r<l.length;r++)o.innerHTML+='<i style="background:'+f(l[r]+1)+'"></i> '+l[r]+(l[r+1]?"&ndash;"+l[r+1]+"<br>":"+");return o},m.addTo(u);function v(e){u.fitBounds(e.target.getBounds())}}))});
